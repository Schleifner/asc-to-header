name: CMake

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

env:
  # Customize the CMake build type here (Release, Debug, RelWithDebInfo, etc.)
  
  BUILD_TYPE: Release
  

jobs:
  compiler:
    name: "Compiler (${{ matrix.os }}, node ${{ matrix.node_version }})"
    runs-on: ${{ matrix.os }}-latest
    strategy:
      matrix:
        os: ["ubuntu", "macos", "windows"]
        node_version: ["current", "lts_latest"]
    steps:
    - uses: actions/checkout@v3
      with:
        node-version: ${{ matrix.node_version }}
    - name: Install dependencies
      run: npm install
    - name: Build
      run: npm run build
    - name: Check
      run: npm run lint
    - name: Test
      run: npm run test 
